# V2Ray-Plugin Multi-Port Auto-Rotator

Продвинутая автоматизированная система для динамической ротации портов и обфускации через WebSocket с использованием ShadowSocks и плагина V2Ray на Ubuntu 22.04.

## Особенности

- **Динамическая ротация основных портов**: Автоматически меняет 7 открытых портов каждые 30 минут в случайном диапазоне. Запускается *сразу после установки*, а затем по расписанию.
- **Динамическая ротация портов обфускации**: Каждый час система выбирает 7 *новых* случайных UDP-портов (с проверкой занятости), *открывает* их и отправляет на них мусорный трафик для усложнения детекции. Предыдущие порты обфускации закрываются.
- **Обфускация WebSocket**: Использует плагин V2Ray с случайными путями WebSocket для маскировки основного трафика
- **Автоматическая безопасность**: Реализует продвинутые меры безопасности, включая защиту от SUID/SGID-атак, совместимость с файловыми системами только для чтения и профили безопасности systemd
- **Самовосстановление**: Автоматическое резервное копирование, проверки целостности и механизмы восстановления
- **Обфускационные фреймы**: Периодическая отправка нестандартных фреймов для повышения уровня безопасности
- **Высокая доступность**: Несколько экземпляров сервиса с автоматическим перезапуском и отказоустойчивостью
- **Использование уникальных маркеров heredoc**: Устранена критическая синтаксическая ошибка, связанная с вложенными блоками heredoc
- **Правильная подстановка переменных**: Исправлена ошибка подстановки переменных в генерируемом скрипте
- **Мягкие политики безопасности**: Использование `ProtectSystem=strict` вместо `full` в юнитах systemd для обеспечения возможности записи в `/etc`.

## Системные требования

- Ubuntu 22.04 LTS
- Архитектура x86_64
- Не менее 100 МБ свободного места на диске
- Права root/sudo
- Подключение к интернету

## Установка

### Быстрая установка
```bash
curl -sSL https://raw.githubusercontent.com/proksi-volonter/v2ray/refs/heads/main/V2Ray-Plugin%20Multi-Port.sh | sudo bash